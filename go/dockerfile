#Build
FROM golang:1.22.0-alpine
WORKDIR /app
#download all dependencies
#Copy DB doesn't work?
COPY db ./db
COPY go/go.mod go/go.sum ./
COPY go/app ./
RUN go mod tidy

RUN go build -o main ./*.go
RUN addgroup -S mercari && adduser -S trainee -G mercari
RUN chown -R trainee:mercari /app/db
USER trainee
EXPOSE 9000
CMD ["./main"]
